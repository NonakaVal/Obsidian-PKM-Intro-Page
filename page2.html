<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ObsiVault - Vault Gratuito para Obsidian</title>
    <meta name="description" content="Receba nosso vault gratuito para Obsidian">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        :root {
            --primary: #7e57c2;
            --primary-light: #b085f5;
            --primary-dark: #4d2c91;
            --dark: #1e1e2d;
            --darker: #151521;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--darker);
            color: white;
            scroll-behavior: smooth;
            line-height: 1.6;
        }

        .glass-card {
            background: rgba(30, 30, 45, 0.8);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(126, 87, 194, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 32px -8px rgba(126, 87, 194, 0.4);
        }

        .gradient-text {
            background: linear-gradient(135deg, #a78bfa 0%, #7e57c2 50%, #5b21b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .input-field {
            background: rgba(30, 30, 45, 0.6);
            border: 1px solid rgba(126, 87, 194, 0.2);
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: rgba(126, 87, 194, 0.6);
            box-shadow: 0 0 0 3px rgba(126, 87, 194, 0.1);
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .phone-input {
            direction: ltr;
            text-align: left;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Download Section - Foco Total no Formulário -->
    <section id="download" class="min-h-screen flex items-center justify-center px-6 md:px-12 bg-gradient-to-br from-darker via-dark to-darker">
        <div class="container mx-auto max-w-4xl">
            <div class="text-center mb-12">
                <div class="flex items-center justify-center space-x-3 mb-8">
                    <div class="p-2 rounded-lg bg-gradient-to-br from-purple-500 to-purple-700">
                        <i data-feather="hexagon" class="text-white text-lg"></i>
                    </div>
                    <span class="text-3xl font-bold gradient-text">ObsiVault</span>
                </div>
                
                <h1 class="text-4xl md:text-5xl font-bold mb-6 leading-tight">
                    Vault Gratuito para <span class="gradient-text">Obsidian</span>
                </h1>
                
                <p class="text-xl text-gray-300 max-w-2xl mx-auto mb-8">
                    Receba meu setup pessoal do Obsidian e entre no grupo de produtividade
                </p>
            </div>

            <!-- Form Section - Clean e Minimalista -->
            <div class="glass-card p-8 md:p-10 rounded-3xl max-w-md mx-auto">
                <form id="download-form" class="space-y-6">
                    <div id="form-success" class="hidden bg-gradient-to-r from-green-900/40 to-green-800/20 text-green-300 p-4 rounded-xl text-center border border-green-800/30">
                        <i data-feather="check-circle" class="inline-block mr-3 text-xl"></i>
                        <span id="success-message">Pronto! Te enviei o vault no WhatsApp.</span>
                    </div>

                    <div id="form-error" class="hidden bg-gradient-to-r from-red-900/40 to-red-800/20 text-red-300 p-4 rounded-xl text-center border border-red-800/30">
                        <i data-feather="alert-circle" class="inline-block mr-3 text-xl"></i>
                        <span id="error-message">Algo deu errado. Tenta de novo?</span>
                    </div>

                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-300 mb-2">Como quer ser chamado?</label>
                        <input type="text" id="name" name="name" 
                            class="w-full input-field rounded-xl px-4 py-3 text-white focus:outline-none placeholder-gray-500"
                            placeholder="Seu nome ou apelido">
                    </div>
                    
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">Seu WhatsApp</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-400">+55</span>
                            </div>
                            <input type="tel" id="phone" name="phone" required 
                                class="w-full input-field rounded-xl pl-12 pr-4 py-3 text-white focus:outline-none placeholder-gray-500 phone-input"
                                placeholder="(15) 99830-4344"
                                maxlength="15">
                        </div>
                    </div>

                    <button type="submit" id="submit-btn" class="btn-primary text-white font-semibold py-4 px-6 rounded-xl w-full flex items-center justify-center relative">
                        <i data-feather="download" class="mr-2"></i> 
                        <span id="btn-text">Receber Vault Gratuito</span>
                        <div id="btn-loading" class="hidden ml-2">
                            <div class="loading-spinner rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                        </div>
                    </button>

                    <p class="text-xs text-gray-500 text-center">
                        Vou te enviar o vault e adicionar no grupo. Sem spam.
                    </p>
                </form>
            </div>

            <!-- Info Minimalista -->
            <div class="text-center mt-12 max-w-2xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-400">
                    <div class="flex items-center justify-center">
                        <i data-feather="zap" class="w-4 h-4 mr-2 text-purple-400"></i>
                        <span>Setup Pronto</span>
                    </div>
                    <div class="flex items-center justify-center">
                        <i data-feather="users" class="w-4 h-4 mr-2 text-purple-400"></i>
                        <span>Grupo Ativo</span>
                    </div>
                    <div class="flex items-center justify-center">
                        <i data-feather="clock" class="w-4 h-4 mr-2 text-purple-400"></i>
                        <span>Uso Diário</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Success Section (hidden by default) -->
    <section id="success-section" class="hidden min-h-screen flex items-center justify-center px-6 md:px-12 bg-gradient-to-b from-dark to-darker">
        <div class="container mx-auto max-w-2xl">
            <div class="glass-card p-10 rounded-3xl text-center">
                <div class="flex justify-center mb-8">
                    <div class="w-20 h-20 rounded-full bg-gradient-to-br from-green-500 to-green-700 flex items-center justify-center">
                        <i data-feather="check" class="text-white text-2xl"></i>
                    </div>
                </div>
                
                <h2 class="text-3xl md:text-4xl font-bold mb-6">
                    <span class="gradient-text">Pronto!</span>
                </h2>
                
                <p class="text-lg text-gray-300 mb-8 leading-relaxed">
                    Acabei de te enviar o link do vault no seu WhatsApp. 
                    Em alguns minutos te adiciono no grupo também!
                </p>

                <div class="bg-purple-900/10 p-6 rounded-2xl mb-8 border border-purple-800/20">
                    <p class="text-gray-200 text-sm leading-relaxed">
                        "Valeu por participar! No grupo a gente troca ideias sobre produtividade e se ajuda com o Obsidian."
                    </p>
                </div>

                <p class="text-sm text-gray-500">
                    Se não recebeu em 2 minutos, me manda um "oi" no WhatsApp: (15) 99830-4344
                </p>
            </div>
        </div>
    </section>

    <script>
        // Inicializar feather icons
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof feather !== 'undefined') {
                feather.replace();
            }

            // Phone number formatting
            document.getElementById('phone').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 11) {
                    value = value.substring(0, 11);
                }
                if (value.length > 0) {
                    let formatted = '';
                    if (value.length <= 2) {
                        formatted = '(' + value;
                    } else if (value.length <= 7) {
                        formatted = '(' + value.substring(0, 2) + ') ' + value.substring(2);
                    } else {
                        formatted = '(' + value.substring(0, 2) + ') ' + value.substring(2, 7) + '-' + value.substring(7, 11);
                    }
                    e.target.value = formatted;
                }
            });

            // Form submission
            document.getElementById('download-form').addEventListener('submit', async function (e) {
                e.preventDefault();

                const phone = document.getElementById('phone').value;
                const name = document.getElementById('name').value;

                // Validar telefone
                const cleanedPhone = phone.replace(/\D/g, '');
                if (!phone || cleanedPhone.length !== 11) {
                    document.getElementById('error-message').textContent = 'Me passa um número de WhatsApp válido';
                    document.getElementById('form-error').classList.remove('hidden');
                    return;
                }

                // Mostrar loading
                setLoading(true);

                // Esconder mensagens anteriores
                document.getElementById('form-success').classList.add('hidden');
                document.getElementById('form-error').classList.add('hidden');

                try {
                    // Simular envio do WhatsApp
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    // Mostrar mensagem de sucesso
                    document.getElementById('success-message').textContent = 'Pronto! Te enviei o vault no WhatsApp.';
                    document.getElementById('form-success').classList.remove('hidden');
                    
                    // Simular download
                    setTimeout(() => {
                        const link = document.createElement('a');
                        link.href = '#';
                        link.download = 'ObsiVault.zip';
                        link.click();
                    }, 1000);
                    
                    // Salvar localmente
                    const subscriberData = {
                        phone: '55' + cleanedPhone,
                        name: name || '',
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem('obsivault_subscriber', JSON.stringify(subscriberData));
                    
                    // Mostrar seção de sucesso após 3 segundos
                    setTimeout(() => {
                        document.getElementById('download').style.display = 'none';
                        document.getElementById('success-section').classList.remove('hidden');
                    }, 3000);

                } catch (error) {
                    console.error('Erro:', error);
                    document.getElementById('error-message').textContent = 'Algo deu errado. Tenta de novo?';
                    document.getElementById('form-error').classList.remove('hidden');
                } finally {
                    setLoading(false);
                }
            });

            function setLoading(isLoading) {
                const btn = document.getElementById('submit-btn');
                const btnText = document.getElementById('btn-text');
                const btnLoading = document.getElementById('btn-loading');
                
                if (isLoading) {
                    btn.disabled = true;
                    btnText.textContent = 'Enviando...';
                    btnLoading.classList.remove('hidden');
                } else {
                    btn.disabled = false;
                    btnText.textContent = 'Receber Vault Gratuito';
                    btnLoading.classList.add('hidden');
                }
            }
        });
    </script>
</body>
</html>